/* ============================================================================================== */
// STORM_PageHandle.cpp
//
// 
// 
// 
// 
//
//
//
//
//
// -----------------------
// Last update: 9/3/2009
/* ============================================================================================== */

#include "STORM_PageHandle.h"
#include <stdlib.h>

//-----------------------------------------------------------------------------------------------
// Constructor
//
// 
//-----------------------------------------------------------------------------------------------
STORM_PageHandle::STORM_PageHandle()
{
	m_opened = false;
	m_pFrame = NULL;
}

//-----------------------------------------------------------------------------------------------
// Destructor
//
// 
//-----------------------------------------------------------------------------------------------
STORM_PageHandle::~STORM_PageHandle()
{
	if (m_opened)
		Close();
}

//-----------------------------------------------------------------------------------------------
// Open
//
// 
//-----------------------------------------------------------------------------------------------
t_rc STORM_PageHandle::Open(STORM_Frame *pFrame)
{
	if (!pFrame) // critical error
	{
		DisplayMessage((char *)"Critical Error. Pointer to frame is NULL.");
		exit(-1);
	}

	if (m_opened)
		Close();

	m_pFrame = pFrame;
	m_opened = true;
	return (OK);
}

//-----------------------------------------------------------------------------------------------
// Close
//
// 
//-----------------------------------------------------------------------------------------------
t_rc STORM_PageHandle::Close()
{
	m_pFrame = NULL;
	m_opened = false;
	return (OK);
}


//-----------------------------------------------------------------------------------------------
// GetPageID
//
// 
//-----------------------------------------------------------------------------------------------
t_rc STORM_PageHandle::GetPageID(int &pageID) const
{
	pageID = m_pFrame->GetPageID();
	return (OK);
}


//-----------------------------------------------------------------------------------------------
// GetDataPtr
//
// 
//-----------------------------------------------------------------------------------------------
t_rc STORM_PageHandle::GetDataPtr(char **ppData) const
{
	*ppData = m_pFrame->GetPageDataPtr();
	return (OK);
}


